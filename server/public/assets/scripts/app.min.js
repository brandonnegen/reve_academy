/*! reve_test 2015-09-20 */
var reveApp=angular.module("reveApp",["ngRoute","chart.js","appControllers"]);reveApp.directive("sameAs",function(){return{require:"ngModel",link:function(a,b,c,d){var e=c.sameAs;a.$watch(c.sameAs,function(){d.$validate()}),d.$validators.match=function(b,c){return c===a.$eval(e)}}}}),reveApp.factory("AuthService",["$q","$timeout","$http",function(a,b,c){function d(){return h?!0:!1}function e(){return h}function f(b,d){var e=a.defer();return c.post("/login",{username:b,password:d}).success(function(a,b){200===b&&a.status?(console.log("data"),h=!0,e.resolve()):(h=!1,e.reject())}).error(function(a){console.log("error"),h=!1,e.reject()}),e.promise}function g(){var b=a.defer();return c.get("/logout").success(function(a){h=!1,b.resolve()}).error(function(a){h=!1,b.reject()}),b.promise}var h=!1;return{isLoggedIn:d,getUserStatus:e,login:f,logout:g,user:h}}]),reveApp.run(["$rootScope","$location","$route","AuthService",function(a,b,c,d){a.$on("$routeChangeStart",function(a,c,e){c.access.restricted===!0&&d.isLoggedIn()===!1&&b.path("/login")})}]);var appControllers=angular.module("appControllers",[]);reveApp.config(["$routeProvider",function(a,b){a.when("/admin",{controller:"AdminController",access:{restricted:!0},templateUrl:"assets/views/admin.html",activetab:"admin",access:{restricted:!0}}).when("/teachers",{controller:"TeacherController",templateUrl:"assets/views/teachers.html",activetab:"teachers",access:{restricted:!0}}).when("/login",{controller:"LoginController",templateUrl:"assets/views/login.html",activetab:"login",access:{restricted:!1}}).when("/register",{controller:"RegisterController",templateUrl:"assets/views/register.html",activetab:"register",access:{restricted:!1}}).when("/schools",{controller:"SchoolController",templateUrl:"assets/views/schools.html",activetab:"schools",access:{restricted:!0}}).when("/admin-teachers",{controller:"AdminTeachersController",templateUrl:"assets/views/admin-teachers.html",activetab:"admin-teachers",access:{restricted:!0}}).when("/admin-classes",{controller:"AdminClassesController",templateUrl:"assets/views/admin-classes.html",activetab:"admin-classes",access:{restricted:!0}}).when("/admin-assignments",{controller:"AdminAssignmentsController",templateUrl:"assets/views/admin-assignments.html",activetab:"admin-assignments",access:{restricted:!0}}).when("/admin-students",{controller:"AdminStudentsController",templateUrl:"assets/views/admin-students.html",activetab:"admin-students",access:{restricted:!0}}).when("/teacher-classes",{controller:"TeacherClassesController",templateUrl:"assets/views/teacher-classes.html",activetab:"teacher-classes",access:{restricted:!0}}).when("/teacher-students",{controller:"TeacherStudentsController",templateUrl:"assets/views/teacher-students.html",activetab:"teacher-students",access:{restricted:!0}}).when("/unauthorized",{templateUrl:"assets/views/unauthorized.html",access:{restricted:!1}}).when("/charts",{controller:"ChartsController",templateUrl:"assets/views/charts.html",activetab:"charts",access:{restricted:!0}}).otherwise({redirectTo:"/login"})}]);